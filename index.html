<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Estacionamiento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- QZ Tray -->
    <script src="https://cdn.jsdelivr.net/npm/qz-tray@2.2.3/qz-tray.js"></script>
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-base-100 text-base-content">

    <!-- Login Screen -->
    <div id="login-screen"
        class="fixed inset-0 z-[200] flex items-center justify-center transition-opacity duration-300">
        <div class="w-full max-w-md p-8 space-y-8 bg-black/20 backdrop-blur-sm rounded-2xl shadow-2xl">
            <div class="text-center">
                <div class="inline-block p-3 rounded-full mb-4 bg-primary">
                    <svg class="h-8 w-8 text-primary-content" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                        fill="currentColor">
                        <path
                            d="M18.944 8.492h-3.232C15.245 7.038 14.01 6 12.5 6s-2.745 1.038-3.212 2.492H6.056L5 12.492v5h14v-5l-1.056-4zM8.5 11.492c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5-1.5.673-1.5 1.5.673 1.5 1.5 1.5zm7 0c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5-1.5.673-1.5 1.5.673 1.5 1.5 1.5zM6.25 19a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm11.5 0a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z" />
                        <path fill-rule="evenodd"
                            d="M3 10.492a3 3 0 013-3h1.182a4.5 4.5 0 018.636 0H18a3 3 0 013 3v6.058a3.001 3.001 0 01-2.015 2.83A3.75 3.75 0 0115.25 21h-6.5a3.75 3.75 0 01-3.735-3.119A3.001 3.001 0 013 16.55V10.492zm3-1.5a1.5 1.5 0 00-1.5 1.5v6.058a1.5 1.5 0 00.765 1.316A2.25 2.25 0 008.75 19.5h6.5a2.25 2.25 0 002.485-2.134A1.5 1.5 0 0019.5 16.55V10.492a1.5 1.5 0 00-1.5-1.5h-1.682a4.502 4.502 0 01-7.636 0H4.5z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <h2 class="text-3xl font-extrabold text-white">Iniciar Sesión</h2>
                <p class="mt-2 text-slate-300">Bienvenido al Control de Estacionamiento</p>
            </div>
            <form id="login-form" class="space-y-6">
                <div>
                    <label for="login-username" class="block text-sm font-medium text-slate-200">Usuario</label>
                    <input id="login-username" type="text" required
                        class="mt-1 block w-full px-4 py-3 bg-white/20 text-white border border-slate-400 rounded-lg focus-style placeholder-slate-400"
                        placeholder="nombre.usuario">
                </div>
                <div>
                    <label for="login-password" class="block text-sm font-medium text-slate-200">Contraseña</label>
                    <input id="login-password" type="password" required
                        class="mt-1 block w-full px-4 py-3 bg-white/20 text-white border border-slate-400 rounded-lg focus-style"
                        placeholder="••••••••">
                </div>
                <div>
                    <button type="submit"
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-bold bg-primary text-primary-content hover:bg-primary-focus focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-300">
                        Entrar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Main App Content -->
    <div id="main-app" class="hidden w-full min-h-screen flex items-center justify-center py-8">
        <div class="w-full max-w-6xl mx-auto p-4 sm:p-6">
            <div class="bg-base-200 rounded-2xl shadow-xl p-6 md:p-10 relative">
                <!-- User Info, Theme Selector, and Logout Button -->
                <div class="absolute top-4 right-6 flex items-center gap-4">
                    <div class="text-right">
                        <p class="font-bold text-base-content" id="session-username"></p>
                        <p class="text-sm text-base-content-secondary" id="session-role"></p>
                    </div>
                    <div class="relative">
                        <button id="theme-toggle-btn" class="p-2 rounded-full hover:bg-base-300 transition-colors">
                            <svg class="w-6 h-6 text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402a3.75 3.75 0 00-5.304-5.304L4.098 14.6c-.43.43-.682.998-.682 1.602s.252 1.172.682 1.602zm3.75-3.75a.75.75 0 011.06 0l2.122 2.122a.75.75 0 01-1.06 1.06L6.878 18.182a.75.75 0 010-1.06z" />
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 15.75a3.75 3.75 0 013.75-3.75V4.5a3.75 3.75 0 00-7.5 0v7.5A3.75 3.75 0 0112 15.75z" />
                            </svg>
                        </button>
                        <!-- Theme Popover -->
                        <div id="theme-popover"
                            class="absolute top-full right-0 mt-2 w-48 bg-base-200 border border-theme rounded-lg shadow-xl p-2 z-10 opacity-0 scale-95 transform pointer-events-none">
                            <h4 class="text-sm font-semibold px-2 py-1 text-base-content">Seleccionar Tema</h4>
                            <div id="theme-selector" class="mt-1 grid grid-cols-3 gap-1">
                                <!-- Theme options will be injected here -->
                            </div>
                        </div>
                    </div>
                    <button id="logout-btn" class="text-sm text-red-600 hover:underline font-semibold">Cerrar
                        Sesión</button>
                </div>

                <header class="mb-8 text-center flex flex-col items-center">
                    <div class="bg-primary p-3 rounded-full mb-4">
                        <svg class="h-8 w-8 text-primary-content" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M18.944 8.492h-3.232C15.245 7.038 14.01 6 12.5 6s-2.745 1.038-3.212 2.492H6.056L5 12.492v5h14v-5l-1.056-4zM8.5 11.492c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5-1.5.673-1.5 1.5.673 1.5 1.5 1.5zm7 0c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5-1.5.673-1.5 1.5.673 1.5 1.5 1.5zM6.25 19a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm11.5 0a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z" />
                            <path fill-rule="evenodd"
                                d="M3 10.492a3 3 0 013-3h1.182a4.5 4.5 0 018.636 0H18a3 3 0 013 3v6.058a3.001 3.001 0 01-2.015 2.83A3.75 3.75 0 0115.25 21h-6.5a3.75 3.75 0 01-3.735-3.119A3.001 3.001 0 013 16.55V10.492zm3-1.5a1.5 1.5 0 00-1.5 1.5v6.058a1.5 1.5 0 00.765 1.316A2.25 2.25 0 008.75 19.5h6.5a2.25 2.25 0 002.485-2.134A1.5 1.5 0 0019.5 16.55V10.492a1.5 1.5 0 00-1.5-1.5h-1.682a4.502 4.502 0 01-7.636 0H4.5z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold text-base-content">Control de Estacionamiento</h1>
                    <p class="text-base-content-secondary mt-2">Escanee un ticket o registre una nueva entrada.</p>
                </header>

                <!-- Dashboard Cards -->
                <div id="dashboard-cards" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
                    <!-- Card: Vehículos Activos -->
                    <div class="dashboard-card bg-blue-100 text-blue-800">
                        <div class="card-icon bg-blue-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V8.618a1 1 0 01.553-.894L9 5m0 15V5m0 15h6.447A1 1 0 0016 20.382V12.618a1 1 0 00-.553-.894L15 11m-6 9v-5m6-4h5.447A1 1 0 0122 12.382V7.618a1 1 0 01-.553-.894L15 4m0 7V4m0 7h-2m-2 2h2v2h-2v-2z" /></svg>
                        </div>
                        <div class="text-right">
                            <p class="card-title">Vehículos Activos</p>
                            <p id="active-vehicles-card" class="card-value">0</p>
                        </div>
                    </div>
                    <!-- Card: Ingresos Estacionamiento -->
                    <div class="dashboard-card bg-green-100 text-green-800">
                        <div class="card-icon bg-green-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                        </div>
                        <div class="text-right">
                            <p class="card-title">Ingresos (Est.)</p>
                            <p id="parking-revenue-card" class="card-value">$0.00</p>
                        </div>
                    </div>
                    <!-- Card: Ingresos Pensiones -->
                    <div class="dashboard-card bg-purple-100 text-purple-800">
                        <div class="card-icon bg-purple-200">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        </div>
                        <div class="text-right">
                            <p class="card-title">Ingresos (Pen.)</p>
                            <p id="pension-revenue-card" class="card-value">$0.00</p>
                        </div>
                    </div>
                    <!-- Card: Ingresos Servicios -->
                    <div class="dashboard-card bg-yellow-100 text-yellow-800">
                        <div class="card-icon bg-yellow-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                        </div>
                        <div class="text-right">
                            <p class="card-title">Ingresos (Serv.)</p>
                            <p id="services-revenue-card" class="card-value">$0.00</p>
                        </div>
                    </div>
                    <!-- Card: Gastos -->
                    <div class="dashboard-card bg-red-100 text-red-800">
                        <div class="card-icon bg-red-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" /></svg>
                        </div>
                        <div class="text-right">
                            <p class="card-title">Gastos</p>
                            <p id="expenses-card" class="card-value">$0.00</p>
                        </div>
                    </div>
                </div>


                <div class="flex justify-center mb-8"><button id="new-entry-btn"
                        class="bg-primary text-primary-content font-bold py-3 px-8 rounded-lg hover:bg-primary-focus focus:outline-none focus:ring-4 focus:ring-primary/50 transition-all duration-300 transform hover:scale-105 shadow-md">Registrar
                        Nueva Entrada</button></div>

                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <label for="barcode-input"
                            class="block text-sm font-medium text-base-content-secondary">Escanear Código de
                            Barras</label>
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-base-content-secondary">Cobro Rápido</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="quick-charge-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="h-6 w-6 text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M3.75 4.5A.75.75 0 014.5 3h15a.75.75 0 01.75.75v15a.75.75 0 01-.75.75h-15a.75.75 0 01-.75-.75v-15zm3 3.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v6a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-6zm3 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v6a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-6zm3 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v6a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-6zm3 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v6a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-6z" />
                            </svg>
                        </div>
                        <input type="text" id="barcode-input" placeholder="Escanee o ingrese el código..."
                            class="w-full pl-12 pr-4 py-3 border rounded-lg text-lg focus-style transition-shadow duration-200 bg-base-200 input-bordered">
                    </div>
                </div>

                <div id="ticket-info" class="hidden bg-base-100 p-6 rounded-lg border border-theme">
                    <h2 class="text-2xl font-semibold text-base-content mb-6 border-b pb-4 border-theme">Detalles del
                        Ticket</h2>
                    <div id="ticket-status-banner" class="hidden p-3 rounded-lg mb-4 text-center font-bold"></div>

                    <div id="hourly-details">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Placa</p>
                                    <p id="vehicle-plate-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5h10.5a1.125 1.125 0 001.125-1.125V6.75a1.125 1.125 0 00-1.125-1.125H3.375A1.125 1.125 0 002.25 6.75v10.5a1.125 1.125 0 001.125 1.125z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Tipo Vehículo</p>
                                    <p id="vehicle-type-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Marca</p>
                                    <p id="vehicle-brand-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m-5.043 5.043a3 3 0 00-4.163-3.873-2.25 2.25 0 01-2.4-2.245 4.5 4.5 0 00-8.4 2.245c0 .399.078.78.22 1.128zm0 0c0 .399.078.78.22 1.128a3 3 0 005.78 1.128z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Color</p>
                                    <p id="vehicle-color-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-theme grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Hora de Entrada</p>
                                    <p id="entry-time-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Tiempo Transcurrido</p>
                                    <p id="time-elapsed-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Hora de Salida</p>
                                    <p id="exit-time-hourly" class="value text-base-content"></p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 pt-6 border-t-2 border-dashed border-theme">
                            <div
                                class="bg-base-content text-base-200 p-4 rounded-lg flex justify-between items-center shadow-inner">
                                <p class="text-xl font-bold">TOTAL A PAGAR:</p>
                                <p id="total-cost-hourly" class="text-3xl font-extrabold"></p>
                            </div>
                        </div>
                        <div
                            class="mt-8 flex flex-col sm:flex-row sm:justify-center sm:space-x-4 space-y-4 sm:space-y-0">
                            <button id="charge-button"
                                class="w-full sm:w-auto bg-primary text-primary-content font-bold py-3 px-6 rounded-lg hover:bg-primary-focus focus:outline-none focus:ring-4 focus:ring-primary/50 transition-all duration-300 shadow-md">Cobrar
                                y Registrar Salida</button>
                            <button id="convert-to-overnight-btn"
                                class="hidden w-full sm:w-auto bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition-all duration-300 shadow-md">Cambiar
                                a Pensión Nocturna</button>
                            <button id="cancel-ticket-btn"
                                class="hidden w-full sm:w-auto bg-red-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 transition-all duration-300 shadow-md">Cancelar
                                Ticket</button>
                        </div>
                    </div>

                    <div id="pension-details" class="hidden">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Placa</p>
                                    <p id="vehicle-plate-pension" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5h10.5a1.125 1.125 0 001.125-1.125V6.75a1.125 1.125 0 00-1.125-1.125H3.375A1.125 1.125 0 002.25 6.75v10.5a1.125 1.125 0 001.125 1.125z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Tipo Vehículo</p>
                                    <p id="vehicle-type-pension" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Marca</p>
                                    <p id="vehicle-brand-pension" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="info-card bg-base-200 border border-theme rounded-lg p-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m-5.043 5.043a3 3 0 00-4.163-3.873-2.25 2.25 0 01-2.4-2.245 4.5 4.5 0 00-8.4 2.245c0 .399.078.78.22 1.128zm0 0c0 .399.078.78.22 1.128a3 3 0 005.78 1.128z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Color</p>
                                    <p id="vehicle-color-pension" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div
                                class="info-card bg-base-200 border border-theme rounded-lg p-4 sm:col-span-2 lg:col-span-4">
                                <div class="icon-bg bg-base-300"><svg class="icon text-primary"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                                    </svg></div>
                                <div>
                                    <p class="label text-base-content-secondary">Tipo de Pensión</p>
                                    <p id="pension-type-details" class="value text-base-content"></p>
                                </div>
                            </div>
                            <div class="sm:col-span-2 lg:col-span-4 mt-4 pt-4 border-t-2 border-dashed border-theme">
                                <div
                                    class="bg-green-600 text-white p-4 rounded-lg flex justify-between items-center shadow-inner">
                                    <p class="text-xl font-bold">PENSIÓN VENCE:</p>
                                    <p id="end-date-pension" class="text-3xl font-extrabold"></p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-8 text-center">
                            <button id="cancel-pension-btn"
                                class="hidden w-full md:w-auto bg-orange-500 text-white font-bold py-3 px-12 rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-4 focus:ring-orange-300 transition-all duration-300 shadow-md">Cancelar
                                Pensión Nocturna</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Entry Modal -->
    <div id="new-entry-modal"
        class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-2xl opacity-0 scale-95 transform">
            <h2 class="text-2xl font-bold mb-6 text-base-content">Registrar Nueva Entrada</h2>
            <div class="mb-6 grid grid-cols-3 gap-2 p-1 bg-base-300 rounded-lg">
                <button id="type-hourly-btn"
                    class="px-4 py-2 text-sm font-bold rounded-md transition-colors bg-primary text-primary-content">Por
                    Horas</button>
                <button id="type-overnight-btn"
                    class="px-4 py-2 text-sm font-bold rounded-md transition-colors text-base-content-secondary">Pensión
                    Nocturna</button>
                <button id="type-pension-btn"
                    class="px-4 py-2 text-sm font-bold rounded-md transition-colors text-base-content-secondary">Estancia
                    Pagada</button>
            </div>
            <form id="new-entry-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><label for="vehicle-type-select" class="form-label text-base-content"><svg
                                class="form-icon text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5h10.5a1.125 1.125 0 001.125-1.125V6.75a1.125 1.125 0 00-1.125-1.125H3.375A1.125 1.125 0 002.25 6.75v10.5a1.125 1.125 0 001.125 1.125z" />
                            </svg><span>Tipo de Vehículo</span></label><select id="vehicle-type-select"
                            class="form-input focus-style bg-base-200 input-bordered" required></select></div>
                    <div>
                        <label for="new-plate-input" class="form-label text-base-content"><svg
                                class="form-icon text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                            </svg><span>Placa</span></label>
                        <div class="relative"><input type="text" id="new-plate-input" placeholder="ABC-123"
                                class="form-input focus-style bg-base-200 input-bordered" required><span
                                id="plate-lookup-msg"
                                class="absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold"></span></div>
                    </div>
                    <div><label for="new-brand-select" class="form-label text-base-content"><svg
                                class="form-icon text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z" />
                            </svg><span>Marca</span></label><select id="new-brand-select"
                            class="form-input focus-style bg-base-200 input-bordered" required></select></div>
                    <div><label for="new-color-input" class="form-label text-base-content"><svg
                                class="form-icon text-base-content-secondary" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m0 0a15.998 15.998 0 013.388-1.622m-5.043 5.043a3 3 0 00-4.163-3.873-2.25 2.25 0 01-2.4-2.245 4.5 4.5 0 00-8.4 2.245c0 .399.078.78.22 1.128zm0 0c0 .399.078.78.22 1.128a3 3 0 005.78 1.128z" />
                            </svg><span>Color</span></label><input type="text" id="new-color-input"
                            list="color-suggestions" placeholder="Ej: Rojo"
                            class="form-input focus-style bg-base-200 input-bordered" required><datalist
                            id="color-suggestions"></datalist></div>
                </div>
                <div id="pension-fields" class="pension-fields pt-4 border-t border-theme">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div id="pension-type-container" class="md:col-span-1"><label for="new-pension-type-input"
                                class="form-label text-base-content"><svg class="form-icon text-base-content-secondary"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                                </svg><span>Tipo de Estancia</span></label><input type="text"
                                id="new-pension-type-input" class="form-input focus-style bg-base-200 input-bordered"
                                placeholder="Ej: Mensual, Quincenal"></div>
                        <div id="pension-end-date-container" class="md:col-span-1"><label for="new-pension-end-date"
                                class="form-label text-base-content"><svg class="form-icon text-base-content-secondary"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18" />
                                </svg><span>Fecha de Vencimiento</span></label><input type="date"
                                id="new-pension-end-date" class="form-input focus-style bg-base-200 input-bordered">
                        </div>
                        <div class="md:col-span-1"><label for="new-pension-amount"
                                class="form-label text-base-content"><svg class="form-icon text-base-content-secondary"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg><span>Monto Pagado $</span></label><input type="number" id="new-pension-amount"
                                placeholder="500.00" step="0.01"
                                class="form-input focus-style bg-base-200 input-bordered"></div>
                    </div>
                </div>
                <div class="mt-8 flex justify-end space-x-4 pt-4"><button type="button" id="cancel-entry-btn"
                        class="bg-base-300 text-base-content font-bold py-2 px-6 rounded-lg hover:bg-opacity-80 transition-colors">Cancelar</button><button
                        type="submit"
                        class="bg-primary text-primary-content font-bold py-2 px-6 rounded-lg hover:bg-primary-focus transition-colors">Guardar
                        Entrada</button></div>
            </form>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div id="calculator-modal"
        class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div
            class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-2xl opacity-0 scale-95 transform flex flex-col max-h-[90vh]">
            <h2 class="text-2xl font-bold mb-6 text-base-content flex-shrink-0">Calculadora de Tarifas</h2>

            <div class="overflow-y-auto flex-grow pr-2">
                <form id="calculator-form">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div><label for="calc-vehicle-type" class="form-label text-base-content"><span>Tipo de
                                    Vehículo</span></label><select id="calc-vehicle-type"
                                class="form-input focus-style bg-base-200 input-bordered" required></select></div>
                        <div><label for="calc-entry-time"
                                class="form-label text-base-content"><span>Entrada</span></label><input type="text"
                                id="calc-entry-time" class="form-input focus-style bg-base-200 input-bordered" required>
                        </div>
                        <div><label for="calc-exit-time"
                                class="form-label text-base-content"><span>Salida</span></label><input type="text"
                                id="calc-exit-time" class="form-input focus-style bg-base-200 input-bordered" required>
                        </div>
                    </div>
                    <div class="flex justify-center my-6"><button type="submit"
                            class="bg-primary text-primary-content font-bold py-3 px-8 rounded-lg hover:bg-primary-focus transition-colors">Calcular
                            Costo</button></div>
                </form>
                <div id="calculator-results" class="hidden pt-6 border-t border-theme">
                    <div id="calc-breakdown" class="space-y-3 mb-4"></div>
                    <div
                        class="bg-base-content text-base-200 p-4 rounded-lg flex justify-between items-center shadow-inner">
                        <p class="text-lg font-bold">TOTAL A PAGAR:</p>
                        <p id="calc-total-cost" class="text-2xl font-extrabold"></p>
                    </div>
                </div>
            </div>

            <div class="mt-8 flex justify-end flex-shrink-0"><button type="button" id="cancel-calc-btn"
                    class="bg-base-300 text-base-content font-bold py-2 px-6 rounded-lg hover:bg-opacity-80 transition-colors">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Expenses Modal -->
    <div id="expenses-modal"
        class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div
            class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-2xl opacity-0 scale-95 transform flex flex-col max-h-[90vh]">
            <div class="flex justify-between items-center mb-6 flex-shrink-0">
                <h2 class="text-2xl font-bold text-base-content">Gestión de Gastos del Día</h2>
                <button id="close-expenses-btn"
                    class="text-base-content-secondary hover:text-base-content text-3xl leading-none">&times;</button>
            </div>

            <div class="overflow-y-auto flex-grow pr-4 -mr-4">
                <form id="expense-form" class="space-y-4 bg-base-100 p-4 rounded-lg mb-6">
                    <input type="hidden" id="expense-id-input">
                    <div>
                        <label for="expense-description-input" class="form-label text-base-content"><span>Descripción
                                del Gasto</span></label>
                        <input type="text" id="expense-description-input"
                            class="form-input focus-style bg-base-200 input-bordered" placeholder="Ej: Compra de agua"
                            required>
                    </div>
                    <div>
                        <label for="expense-amount-input" class="form-label text-base-content"><span>Monto
                                ($)</span></label>
                        <input type="number" id="expense-amount-input" step="0.01"
                            class="form-input focus-style bg-base-200 input-bordered" placeholder="50.00" required>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancel-expense-edit-btn"
                            class="hidden bg-base-300 text-base-content font-bold py-2 px-4 rounded-lg hover:bg-opacity-80 text-sm">Cancelar</button>
                        <button type="submit" id="save-expense-btn"
                            class="bg-primary text-primary-content font-bold py-2 px-4 rounded-lg hover:bg-primary-focus text-sm">Guardar
                            Gasto</button>
                    </div>
                </form>

                <h3 class="font-semibold mb-3 text-base-content">Gastos de Hoy</h3>
                <div id="expenses-list-container" class="space-y-2 mb-4"></div>

                <div
                    class="bg-base-content text-base-200 p-4 rounded-lg flex justify-between items-center shadow-inner mt-6">
                    <p class="text-lg font-bold">TOTAL DE GASTOS:</p>
                    <p id="expenses-total" class="text-2xl font-extrabold">$0.00</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal"
        class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div
            class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-3xl max-h-[90vh] flex flex-col opacity-0 scale-95 transform">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-base-content">Configuración</h2>
                <button id="close-settings-btn"
                    class="text-base-content-secondary hover:text-base-content text-3xl leading-none">&times;</button>
            </div>

            <div class="border-b border-theme mb-4">
                <nav class="-mb-px flex space-x-6" id="settings-tabs">
                    <button data-tab="business"
                        class="tab-button active shrink-0 border-b-2 font-medium px-1 py-2 text-sm text-base-content-secondary hover:border-gray-300 hover:text-gray-700">Negocio</button>
                    <button data-tab="services"
                        class="tab-button shrink-0 border-b-2 font-medium px-1 py-2 text-sm text-base-content-secondary hover:border-gray-300 hover:text-gray-700">Servicios</button>
                    <button data-tab="vehicle-types"
                        class="tab-button shrink-0 border-b-2 font-medium px-1 py-2 text-sm text-base-content-secondary hover:border-gray-300 hover:text-gray-700">Tipos
                        de Vehículo</button>
                    <button data-tab="users"
                        class="tab-button shrink-0 border-b-2 font-medium px-1 py-2 text-sm text-base-content-secondary hover:border-gray-300 hover:text-gray-700">Usuarios</button>
                </nav>
            </div>

            <div class="overflow-y-auto flex-grow pr-4 -mr-4">
                <div id="tab-content-business" class="tab-content active">
                    <h3 class="font-semibold mb-3 text-base-content">Información del Negocio</h3>
                    <form id="business-info-form" class="space-y-4 bg-base-100 p-6 rounded-lg">
                        <div>
                            <label for="business-name" class="block text-sm font-medium text-base-content">Nombre del
                                Negocio</label>
                            <input type="text" id="business-name"
                                class="form-input focus-style mt-1 bg-base-200 input-bordered"
                                placeholder="Estacionamiento Central">
                        </div>
                        <div>
                            <label for="business-address"
                                class="block text-sm font-medium text-base-content">Domicilio</label>
                            <input type="text" id="business-address"
                                class="form-input focus-style mt-1 bg-base-200 input-bordered"
                                placeholder="Av. Principal 123, Centro">
                        </div>
                        <div>
                            <label for="business-phone"
                                class="block text-sm font-medium text-base-content">Teléfono</label>
                            <input type="tel" id="business-phone"
                                class="form-input focus-style mt-1 bg-base-200 input-bordered"
                                placeholder="55 1234 5678">
                        </div>
                        <div>
                            <label for="business-overnight-rate"
                                class="block text-sm font-medium text-base-content">Tarifa Nocturna ($)</label>
                            <input type="number" id="business-overnight-rate" step="0.01"
                                class="form-input focus-style mt-1 bg-base-200 input-bordered" placeholder="100.00">
                        </div>
                        <div>
                            <label for="business-hours"
                                class="block text-sm font-medium text-base-content">Horarios</label>
                            <textarea id="business-hours" class="form-input focus-style mt-1 bg-base-200 input-bordered"
                                rows="3"
                                placeholder="Lunes a Viernes: 9:00 - 21:00&#10;Sábado: 10:00 - 20:00"></textarea>
                        </div>
                        <div class="flex justify-end pt-4">
                            <button type="submit"
                                class="bg-primary text-primary-content font-bold py-2 px-6 rounded-lg hover:bg-primary-focus text-sm">Guardar
                                Cambios</button>
                        </div>
                    </form>
                </div>

                <div id="tab-content-services" class="tab-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="font-semibold mb-3 text-base-content">Lista de Servicios</h3>
                            <div id="services-list-container" class="space-y-2"></div>
                        </div>
                        <div>
                            <h3 id="service-form-title" class="font-semibold mb-3 text-base-content">Añadir Nuevo
                                Servicio</h3>
                            <form id="service-form" class="space-y-4 bg-base-100 p-4 rounded-lg">
                                <input type="hidden" id="service-id-input">
                                <div>
                                    <label for="service-name-input"
                                        class="block text-sm font-medium text-base-content">Nombre</label>
                                    <input type="text" id="service-name-input"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered" required>
                                </div>
                                <div>
                                    <label for="service-price-input"
                                        class="block text-sm font-medium text-base-content">Precio ($)</label>
                                    <input type="number" id="service-price-input" step="0.01"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered" required>
                                </div>
                                <div>
                                    <label for="service-icon-select"
                                        class="block text-sm font-medium text-base-content">Icono</label>
                                    <select id="service-icon-select"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered"></select>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button type="button" id="cancel-service-edit-btn"
                                        class="hidden bg-base-300 text-base-content font-bold py-2 px-4 rounded-lg hover:bg-opacity-80 text-sm">Cancelar</button>
                                    <button type="submit" id="save-service-btn"
                                        class="bg-primary text-primary-content font-bold py-2 px-4 rounded-lg hover:bg-primary-focus text-sm">Guardar
                                        Servicio</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="tab-content-vehicle-types" class="tab-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="font-semibold mb-3 text-base-content">Lista de Tipos de Vehículo</h3>
                            <div id="vehicle-types-list-container" class="space-y-2"></div>
                        </div>
                        <div>
                            <h3 id="vehicle-type-form-title" class="font-semibold mb-3 text-base-content">Añadir Nuevo
                                Tipo</h3>
                            <form id="vehicle-type-form" class="space-y-4 bg-base-100 p-4 rounded-lg">
                                <input type="hidden" id="vehicle-type-id-input">
                                <div>
                                    <label for="vehicle-type-name-input"
                                        class="block text-sm font-medium text-base-content">Nombre</label>
                                    <input type="text" id="vehicle-type-name-input"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered" required>
                                </div>
                                <div>
                                    <label for="vehicle-type-rate-input"
                                        class="block text-sm font-medium text-base-content">Tarifa por Hora ($)</label>
                                    <input type="number" id="vehicle-type-rate-input" step="0.01"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered" required>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button type="button" id="cancel-vehicle-type-edit-btn"
                                        class="hidden bg-base-300 text-base-content font-bold py-2 px-4 rounded-lg hover:bg-opacity-80 text-sm">Cancelar</button>
                                    <button type="submit" id="save-vehicle-type-btn"
                                        class="bg-primary text-primary-content font-bold py-2 px-4 rounded-lg hover:bg-primary-focus text-sm">Guardar
                                        Tipo</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="tab-content-users" class="tab-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="font-semibold mb-3 text-base-content">Lista de Usuarios</h3>
                            <div id="users-list-container" class="space-y-2"></div>
                        </div>
                        <div>
                            <h3 id="user-form-title" class="font-semibold mb-3 text-base-content">Añadir Nuevo Usuario
                            </h3>
                            <form id="user-form" class="space-y-4 bg-base-100 p-4 rounded-lg">
                                <input type="hidden" id="user-id-input">
                                <div>
                                    <label for="user-name-input"
                                        class="block text-sm font-medium text-base-content">Nombre de Usuario</label>
                                    <input type="text" id="user-name-input"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered" required>
                                </div>
                                <div>
                                    <label for="user-role-select"
                                        class="block text-sm font-medium text-base-content">Rol</label>
                                    <select id="user-role-select"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered">
                                        <option value="Administrador">Administrador</option>
                                        <option value="Vendedor">Vendedor</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="user-password-input"
                                        class="block text-sm font-medium text-base-content">Contraseña</label>
                                    <input type="password" id="user-password-input"
                                        class="form-input focus-style mt-1 bg-base-200 input-bordered"
                                        placeholder="Dejar en blanco para no cambiar">
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button type="button" id="cancel-user-edit-btn"
                                        class="hidden bg-base-300 text-base-content font-bold py-2 px-4 rounded-lg hover:bg-opacity-80 text-sm">Cancelar</button>
                                    <button type="submit" id="save-user-btn"
                                        class="bg-primary text-primary-content font-bold py-2 px-4 rounded-lg hover:bg-primary-focus text-sm">Guardar
                                        Usuario</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-sm opacity-0 scale-95 transform">
            <h3 id="confirm-modal-title" class="text-lg font-bold text-base-content mb-4">Confirmar Acción</h3>
            <p id="confirm-modal-message" class="text-base-content-secondary mb-6">¿Está seguro de que desea continuar?
            </p>
            <div class="flex justify-end space-x-4">
                <button id="confirm-modal-cancel-btn"
                    class="bg-base-300 text-base-content font-bold py-2 px-6 rounded-lg hover:bg-opacity-80">Cancelar</button>
                <button id="confirm-modal-confirm-btn"
                    class="bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Quick Charge Modal -->
    <div id="quick-charge-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div
            class="modal-content bg-base-200 rounded-2xl shadow-xl p-8 w-full max-w-md opacity-0 scale-95 transform text-center">
            <div class="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-100 mb-6">
                <svg class="h-12 w-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-2xl font-bold text-base-content mb-2">Cobro Realizado</h3>
            <p class="text-base-content-secondary mb-6">El ticket ha sido pagado con éxito.</p>
            <div class="bg-base-100 p-4 rounded-lg border border-theme">
                <p class="text-lg font-medium text-base-content-secondary">Total Cobrado</p>
                <p id="quick-charge-amount" class="text-6xl font-extrabold text-primary my-2">$0.00</p>
                <div class="text-sm text-base-content-secondary">
                    <p>Ticket: <span id="quick-charge-ticket-id" class="font-semibold"></span></p>
                    <p>Placa: <span id="quick-charge-plate" class="font-semibold"></span></p>
                    <p>Tiempo: <span id="quick-charge-time" class="font-semibold"></span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Shift Report (Corte de Caja) Modal -->
    <div id="shift-report-modal"
        class="fixed inset-0 z-[150] flex items-center justify-center modal-backdrop opacity-0 pointer-events-none">
        <div
            class="modal-content bg-base-200 rounded-lg shadow-xl p-8 w-full max-w-md opacity-0 scale-95 transform flex flex-col max-h-[90vh]">
            <h2 class="text-2xl font-bold mb-2 text-base-content flex-shrink-0">Corte de Caja</h2>
            <p class="text-base-content-secondary mb-6" id="shift-report-user-info"></p>

            <div id="shift-report-content" class="overflow-y-auto flex-grow pr-2 space-y-4">
                <!-- El contenido del reporte se inyectará aquí -->
            </div>

            <div class="mt-8 flex justify-between items-center flex-shrink-0">
                <button type="button" id="print-shift-report-btn"
                    class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors">
                    Imprimir
                </button>
                <button type="button" id="logout-confirm-btn"
                    class="bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 transition-colors">
                    Cerrar Sesión
                </button>
            </div>
        </div>
    </div>


    <!-- Floating Action Button -->
    <div id="fab-container" class="fab-container">
        <div id="fab-options" class="fab-options">
            <!-- Los botones de opción se agregarán aquí dinámicamente -->
        </div>
        <button id="fab-main"
            class="fab-main bg-primary text-primary-content w-16 h-16 rounded-full flex items-center justify-center shadow-lg"><svg
                class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg></button>
    </div>

    <!-- Contenedor para las notificaciones Toast -->
    <div id="toast-container" class="fixed top-5 right-5 z-[210] space-y-2 w-full max-w-xs"></div>

    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
    <script src="js/main.js"></script>

</body>

</html>
